<%- include ("_partial/_header.ejs"); %>
<link rel="stylesheet" href="css/profil.css">

<div class="flex">
  <div class="nonslider-insc">
    <div class="flex-items flex-item-50 profil-block">
      <div class="profil-infos">
        <%- include ("_partial/profil/_tab_profilG.ejs"); %>
      </div>
      <button type="button" class="btn btn-envoyer" name="button">Modifier</button>

      <div class="profil-colliers tableau">
        <%- include ("_partial/profil/_liste_collier.ejs"); %>
      </div>
      <button type="button" class="btn btn-envoyer" name="button">Modifier</button>

    </div>
    <div class="flex-items flex-item-50 profil-block">
      <div class="profil-animaux">
        <%- include ("_partial/profil/_liste_animaux.ejs"); %>
      </div>
      <button type="button" class="btn btn-envoyer" name="button">Modifier</button>
    </div>
  </div>
  <!------------Slider du form-------------------->
  <div class="slider-insc">
    <div class="slideshow-container">
      <!-- Full-width images with number and caption text -->
      <div class="mySlides">
        <div class="flex-items flex-item-50 profil-block">
          <div class="profil-infos">
            <%- include (recept); %>
          </div>
          <button type="button" class="btn btn-envoyer" onclick="changerLien();" value="_tab_profilP_modifier" name="button">Modifier</button>
          <!-- <script type="text/javascript">
            function changerLien() {
              let data = '<%-recept%>';
              console.log(data);
              const lien = data.split('.');
              console.log(lien[0]);
              console.log(lien[1]);
              recept = lien[0]+'_modifier.'+lien[1];
              console.log(recept);
            }
          </script> -->
        </div>
      </div>
      <div class="mySlides">
        <div class="flex-items flex-item-50 profil-block tableau">
          <div class="profil-colliers">
            <%- include ("_partial/profil/_liste_collier.ejs"); %>
          </div>
          <button type="button" class="btn btn-envoyer" name="button">Modifier</button>
        </div>
      </div>
      <div class="mySlides">
        <div class="flex-items flex-item-50 profil-block">
          <div class="profil-animaux">
            <%- include ("_partial/profil/_liste_animaux.ejs"); %>
          </div>
          <button type="button" class="btn btn-envoyer" name="button">Modifier</button>
        </div>
      </div>

      <script type="text/javascript">
        var slideIndex = 1;
        showSlides(slideIndex);

        // Next/previous controls
        function plusSlides(n) {
          showSlides(slideIndex += n);
        }

        // Thumbnail image controls
        function currentSlide(n) {
          showSlides(slideIndex = n);
        }

        function showSlides(n) {
          var i;
          var slides = document.getElementsByClassName("mySlides");
          var dots = document.getElementsByClassName("dot");
          if (n > slides.length) {slideIndex = 1}
          if (n < 1) {slideIndex = slides.length}
          for (i = 0; i < slides.length; i++) {
              slides[i].style.display = "none";
          }
          for (i = 0; i < dots.length; i++) {
              dots[i].className = dots[i].className.replace(" active", "");
          }
          slides[slideIndex-1].style.display = "flex";
        }
      </script>
      <!-- Next and previous buttons -->
      <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
      <a class="next" onclick="plusSlides(1)">&#10095;</a>
    </div>
    <br>
  </div>
  <!---------------------Fin du Slider-------------------------->
</div>
<div class="btn-block">
  <a href="/home" class="btn btn-profil-retour">Retour</a>
</div>

<script type="text/javascript">

    function longueurMailGrand() {
      var parentDOM   = document.getElementById("grand");
      console.log(parentDOM);
      var mailG        = parentDOM.getElementsByClassName("popover__title")[0];
      console.log(mailG);
      var popG         = parentDOM.getElementsByClassName("popover__content")[0];
      var voirG        = parentDOM.getElementsByClassName("popover__message")[0];

      var monTexteG = mailG.innerText || mailG.textContent || mailG.innerHTML;

      console.log(monTexteG);
      console.log(monTexteG.length);
      //document.getElementById('pop').style.display = 'none';
      if (monTexteG.length < 20)
      {
        console.log("entre supprime");
        popG.style.display = 'none';
      }
      else
      {
        console.log("entre ajouter");
        mailG.textContent = "voir";
        popG.style.display = 'flex';
        voirG.innerHTML = monTexteG;
      }
    }

    function longueurMail() {
      var mailP        = document.getElementById("mailP");
      var mailG        = document.getElementById("mailG");

      var popP         = document.getElementById("popP");
      var popG         = document.getElementById("popG");

      var voirP        = document.getElementById("voirP");
      var voirG        = document.getElementById("voirG");

      var monTexteP = mailP.innerText || mailP.textContent || mailP.innerHTML;
      var monTexteG = mailG.innerText || mailG.textContent || mailG.innerHTML;

      console.log(monTexteP);
      console.log(monTexteP.length);
      console.log(monTexteG);
      console.log(monTexteG.length);
      //document.getElementById('pop').style.display = 'none';
      if (monTexteP.length < 20)
      {
        console.log("entre supprime Petit");
        popP.style.display = 'none';
      }
      else
      {
        console.log("entre ajouter Petit");
        mailP.textContent = "voir";
        popP.style.display = 'flex';
        voirP.innerHTML = monTexteP;
      }

      if (monTexteG.length < 20 || monTexteP.length < 20)
      {
        console.log("entre supprime Grrand");
        popG.style.display = 'none';
        console.log("entre supprime Petit");
        popP.style.display = 'none';
      }
      else
      {
        console.log("entre ajouter Grand");
        mailG.textContent = "voir";
        popG.style.display = 'flex';
        voirG.innerHTML = monTexteG;
        console.log("entre ajouter Petit");
        mailP.textContent = "voir";
        popP.style.display = 'flex';
        voirP.innerHTML = monTexteP;
      }
    }

</script>

<%- include ("_partial/_footer.ejs"); %>
